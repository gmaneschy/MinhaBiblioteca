<!DOCTYPE html>

<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Biblioteca</title>
    {% load static %}
    <style>
  body {
    background-image: url("{% static 'bookshelf.png' %}");
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
  }
</style>
    <link rel="stylesheet" href="{% static 'css/homepage.css' %}">
</head>
<body>

<div class="container">
  <h1>Cadastro</h1>
  <form method="post" id="cadastroForm">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" id="btnCadastrar">Cadastrar</button>
</form>


{% if messages %}
  <div id="cadastro-sucesso" data-sucesso="true" style="display:none;"></div>
{% endif %}
<script>
  window.addEventListener("DOMContentLoaded", function () {
    const sucesso = document.querySelector('#cadastro-sucesso');
    const botao = document.querySelector('#btnCadastrar');

    if (sucesso && sucesso.dataset.sucesso === "true") {
      const textoOriginal = botao.textContent;
      botao.textContent = "Livro cadastrado!";
      botao.disabled = true; // Evita clicar de novo nesse tempo

      setTimeout(() => {
        botao.textContent = textoOriginal;
        botao.disabled = false;
      }, 2000); // volta depois de 2 segundos
    }
  });
</script>
</div>
</body>
</html>
