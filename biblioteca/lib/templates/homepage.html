<!DOCTYPE html>

<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Biblioteca</title>
    {% load static %}
<style>
  body {
    background-image: url("{% static 'bookshelf.png' %}");
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
  }
</style>
    <link rel="stylesheet" href="{% static 'css/homepage.css' %}">
</head>
<body>

<div class="container">
    <h1>Cadastro de Livros</h1>

    <div class="tab">
        <button class="tablinks active" onclick="openTab(event, 'simples')">Cadastro Simples</button>
        <button class="tablinks" onclick="openTab(event, 'avancado')">Cadastro Avançado</button>
    </div>

    <div id="simples" class="tabcontent" style="display:block;">
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="form_simples">
            {{ form_simples.as_p }}
            <button type="submit" class="btn">Salvar</button>
        </form>
    </div>

    <div id="avancado" class="tabcontent">
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="form_avancado">

            <div class="form-section">
                <h3>Informações Básicas</h3>
                <a> Título: {{ form_avancado.titulo }}</a>
                {{ form_avancado.autor }}
                {{ form_avancado.editora }}
                {{ form_avancado.tradutor }}
                {{ form_avancado.genero }}
                {{ form_avancado.npaginas }}
                {{ form_avancado.ano }}
                {{ form_avancado.preco }}
                {{ form_avancado.status }}

                <h3>Campos Visíveis na Tabela</h3>
                <ul>
                <li>{{ form_avancado.mostrar_tradutor }}</li>
                <li>{{ form_avancado.mostrar_genero }}</li>
                <li>{{ form_avancado.mostrar_npaginas }}</li>
                <li>{{ form_avancado.mostrar_ano }}</li>
                <li>{{ form_avancado.mostrar_preco }}</li>
                <li>{{ form_avancado.mostrar_status }}</li>
                </ul>
            </div>

            <button type="submit" class="btn">Salvar</button>
        </form>
    </div>
</div>



{% if messages %}
  {% for message in messages %}
    <div class="mensagem-oculta" data-message="{{ message.tags }}" style="display: none;"></div>
  {% endfor %}
{% endif %}


<script>
  window.addEventListener("DOMContentLoaded", function () {
    const mensagem = document.querySelector('.mensagem-oculta');
    const botao = document.querySelector('#btnCadastrar');

    if (mensagem && mensagem.dataset.message.includes('success')) {
      const textoOriginal = botao.textContent;
      botao.textContent = "Livro cadastrado!";
      botao.disabled = true;

      setTimeout(() => {
        botao.textContent = textoOriginal;
        botao.disabled = false;
      }, 2000);
    }
  });
</script>
<script>
function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}
</script>
</body>

</html>
